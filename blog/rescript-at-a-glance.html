<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>ReScript 体验 | My Notion Blog</title><meta name="description" content="An example Next.js site using Notion for the blog"/><meta name="og:title" content="My Notion Blog"/><meta property="og:image" content="https://notion-blog.now.sh/og-image.png"/><meta name="twitter:site" content="@_ijjk"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://notion-blog.now.sh/og-image.png"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/e065ac2c76988cdfc655.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e065ac2c76988cdfc655.css" data-n-g=""/><link rel="preload" href="/_next/static/css/50bf9f2cfca6ec1a805b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/50bf9f2cfca6ec1a805b.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-0dc83f9b720ecde826ce.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-980c56837d115b8ec367.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-460b9f826c931ed60fcd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-69e786842dbc206e05ff.js" as="script"/><link rel="preload" href="/_next/static/chunks/814-16eda819eff2e28d39ff.js" as="script"/><link rel="preload" href="/_next/static/chunks/952-f713f432e8719510f721.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-f139a5e61d49a7835706.js" as="script"/></head><body><div id="__next"><header class="header_header__WP9pK"><ul><li><a href="/">Home</a></li><li><a href="/blog">Blog</a></li><li><a href="/contact">Contact</a></li><li><a href="https://github.com/ijjk/notion-blog" rel="noopener" target="_blank">Source Code</a></li></ul></header><div class="blog_post__39rqQ"><h1>ReScript 体验</h1><hr/><ul><li>TS 中经常用 Partial&lt;FullArg&gt; 作为参数类型，允许用户省略掉其中一些字段；但 ReScript 因为没有 nullable record/object properties，需要改成用 (optional) labeled argument 来达到“可选”的效果，比如 ReScript 中的 React component make 和 ReactDOM.Style.make<ul><li>和 currying 结合又导致了 <a href="https://rescript-lang.org/docs/manual/latest/function#optional-labeled-arguments" rel="noopener" target="_blank">optional argument at the last position</a> 的问题</li></ul></li><li>TS 中 discriminated union 用 string 作为 tag，一个好处是 string 可以直接用来展示，在早期的 prototyping 阶段很方便；坏处是类型推断难<ul><li>对应 ReScript 的 poly variant</li></ul></li><li>React.array/string 让 JSX 编写、调试变得复杂，比如普通的字符串也要用React.string和{}包裹，相比TSX多了不少噪音<ul><li>Tip: 把 React.string 等 helper 用 pipe 后置，后续删除和修改会更方便</li></ul></li><li>JSX 中指定 key 必须是 string（没有隐式转换），需要手动调用 toString</li><li>JSX 转换过程：JSX→ReScript function calls(make&amp;makeProps)→JS<ul><li>Q: makeProps&amp;make 是如何在第二步被 elimate 的？</li></ul></li><li>官方文档里没提到，但 ReScript 保留了 ReasonML 的 partial application 语法，在 setState 时很方便，比如 <code>setState(reduce(_, action))</code></li></ul></div><footer><span>Deploy your own!</span><a href="https://vercel.com/new/git/external?repository-url=https://github.com/ijjk/notion-blog/tree/main&amp;project-name=notion-blog&amp;repository-name=notion-blog" rel="noopener" target="_blank"><img src="https://vercel.com/button" height="46" width="132" alt="deploy to Vercel button"/></a><span>or<!-- --> <a href="https://github.com/ijjk/notion-blog" rel="noopener" target="_blank">view source</a></span></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"044f0173-294f-4653-a6d7-1b4a6a408492","Slug":"rescript-at-a-glance","Date":null,"Authors":[],"Published":"Yes","Page":"ReScript 体验","preview":[],"content":[{"role":"editor","value":{"id":"b9a6afe3-4932-4e02-b401-26ccc92d9b00","version":496,"type":"bulleted_list","properties":{"title":[["TS 中经常用 Partial\u003cFullArg\u003e 作为参数类型，允许用户省略掉其中一些字段；但 ReScript 因为没有 nullable record/object properties，需要改成用 (optional) labeled argument 来达到“可选”的效果，比如 ReScript 中的 React component make 和 ReactDOM.Style.make"]]},"content":["19c24576-feff-4225-9174-7bee10a6c838"],"created_time":1629620220000,"last_edited_time":1630036020000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"19c24576-feff-4225-9174-7bee10a6c838","version":63,"type":"bulleted_list","properties":{"title":[["和 currying 结合又导致了 "],["optional argument at the last position",[["a","https://rescript-lang.org/docs/manual/latest/function#optional-labeled-arguments"]]],[" 的问题"]]},"created_time":1630036020000,"last_edited_time":1630036080000,"parent_id":"b9a6afe3-4932-4e02-b401-26ccc92d9b00","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"be03d64e-d657-41a3-91d6-49d65b431f96","version":251,"type":"bulleted_list","properties":{"title":[["TS 中 discriminated union 用 string 作为 tag，一个好处是 string 可以直接用来展示，在早期的 prototyping 阶段很方便；坏处是类型推断难"]]},"content":["0986ec62-8552-415b-bc13-499ee16a95eb"],"created_time":1629623220000,"last_edited_time":1629635940000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"0986ec62-8552-415b-bc13-499ee16a95eb","version":96,"type":"bulleted_list","properties":{"title":[["对应 ReScript 的 poly variant"]]},"created_time":1629635640000,"last_edited_time":1629635940000,"parent_id":"be03d64e-d657-41a3-91d6-49d65b431f96","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"b6875d5d-9efa-4bf3-ae3c-24ab0f72e486","version":253,"type":"bulleted_list","properties":{"title":[["React.array/string 让 JSX 编写、调试变得复杂，比如普通的字符串也要用React.string和{}包裹，相比TSX多了不少噪音"]]},"content":["5f896091-76ce-4e0b-ab83-7d51fc04e7eb"],"created_time":1629613020000,"last_edited_time":1629628440000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"5f896091-76ce-4e0b-ab83-7d51fc04e7eb","version":27,"type":"bulleted_list","properties":{"title":[["Tip: 把 React.string 等 helper 用 pipe 后置，后续删除和修改会更方便"]]},"format":{"copied_from_pointer":{"id":"dae8c448-39f1-4437-ad4b-74fe0cad31e8","table":"block","spaceId":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},"created_time":1629617292536,"last_edited_time":1629628140000,"parent_id":"b6875d5d-9efa-4bf3-ae3c-24ab0f72e486","parent_table":"block","alive":true,"copied_from":"dae8c448-39f1-4437-ad4b-74fe0cad31e8","created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"18f68b7b-ab48-4c88-a053-700669b95c84","version":232,"type":"bulleted_list","properties":{"title":[["JSX 中指定 key 必须是 string（没有隐式转换），需要手动调用 toString"]]},"created_time":1629628440000,"last_edited_time":1629628500000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"1560d20f-b374-4338-826c-fb8b6a037417","version":51,"type":"bulleted_list","properties":{"title":[["JSX 转换过程：JSX→ReScript function calls(make\u0026makeProps)→JS"]]},"content":["e49e605c-cb66-4785-b9a5-95042e0554d9"],"created_time":1629619200000,"last_edited_time":1629628200000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"e49e605c-cb66-4785-b9a5-95042e0554d9","version":119,"type":"bulleted_list","properties":{"title":[["Q: makeProps\u0026make 是如何在第二步被 elimate 的？"]]},"created_time":1629619320000,"last_edited_time":1629628200000,"parent_id":"1560d20f-b374-4338-826c-fb8b6a037417","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}},{"role":"editor","value":{"id":"856ec167-e53c-49cc-b68a-4501d18f0fb6","version":195,"type":"bulleted_list","properties":{"title":[["官方文档里没提到，但 ReScript 保留了 ReasonML 的 partial application 语法，在 setState 时很方便，比如 "],["setState(reduce(_, action))",[["c"]]]]},"created_time":1629535440000,"last_edited_time":1629628200000,"parent_id":"044f0173-294f-4653-a6d7-1b4a6a408492","parent_table":"block","alive":true,"created_by_table":"notion_user","created_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","last_edited_by_table":"notion_user","last_edited_by_id":"967b1541-48c8-43d1-8d7d-ac730d8c6c6f","space_id":"292f8b39-f9e8-4e8a-92b7-9d0c7200a2b2"}}]},"preview":false},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"rescript-at-a-glance"},"buildId":"Tn2RRhAyBrjpzbBpOlUnj","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-eef578260fd80f8fff94.js"></script><script src="/_next/static/chunks/webpack-0dc83f9b720ecde826ce.js" async=""></script><script src="/_next/static/chunks/framework-980c56837d115b8ec367.js" async=""></script><script src="/_next/static/chunks/main-460b9f826c931ed60fcd.js" async=""></script><script src="/_next/static/chunks/pages/_app-69e786842dbc206e05ff.js" async=""></script><script src="/_next/static/chunks/814-16eda819eff2e28d39ff.js" async=""></script><script src="/_next/static/chunks/952-f713f432e8719510f721.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f139a5e61d49a7835706.js" async=""></script><script src="/_next/static/Tn2RRhAyBrjpzbBpOlUnj/_buildManifest.js" async=""></script><script src="/_next/static/Tn2RRhAyBrjpzbBpOlUnj/_ssgManifest.js" async=""></script></body></html>